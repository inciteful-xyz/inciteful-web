{
  "subtext": "Keep adding interesting papers to the graph from the tables below.  The more you add the more specific the network will be to you topic.  Typically it takes a few iterations of adding papers and re-creating the graph before you have exhausted your topic and hit diminishing returns.",
  "content": [
    {
      "id": "similar-paper-graph",
      "sql": "SELECT paper_id, distance FROM papers p WHERE {{filters}} ORDER BY adamic_adar + COALESCE(cocite, 0) DESC LIMIT 25",
      "type": "graph"
    },
    {
      "id": "similar-papers",
      "title": "Similar Papers",
      "subtext": "These are papers which tend to cite the papers you have selected above.  They normally bias towards newer papers and can help you find the latest literature on the topic.",
      "emptyMessage": "We could not find any similar papers.  This is often because the source paper does not have any outgoing citations.",
      "sql": "SELECT paper_id, doi, authors, title, adamic_adar + COALESCE(cocite, 0) AS similarity, published_year, num_cited_by\nFROM papers p\nWHERE {{filters}}\nAND distance = 2\nAND (adamic_adar > 0 or cocite > 0)\nORDER BY similarity DESC,  page_rank DESC"
    },
    {
      "id": "other-papers",
      "renderColumns": true,
      "content": [
        {
          "id": "most-important-papers",
          "title": "Most Important Papers",
          "subtext": "These are the \"Most Important\" papers as ranked by PageRank.  These tend to be the older papers in the field.",
          "sql": "SELECT paper_id, doi, authors, title, page_rank, num_cited_by, published_year\nFROM papers p\nWHERE {{filters}}\nORDER BY page_rank DESC, adamic_adar DESC"
        },
        {
          "id": "review-papers",
          "title": "Review Papers",
          "subtext": "These papers cite the most papers present in the graph.  As a result, there is a high likelyhood that these papers are review papers.",
          "sql": "SELECT paper_id, doi, authors, title, num_citing, num_cited_by, published_year\nFROM papers p\nWHERE distance = 2 \nAND {{filters}}\nORDER BY num_citing DESC, adamic_adar DESC"
        }
      ]
    },
    {
      "id": "recent-papers",
      "renderColumns": true,
      "content": [
        {
          "title": "Recent Papers by the Top 100 Authors",
          "sql": "SELECT p.paper_id, doi, authors, title, num_cited_by, published_year, adamic_adar\nFROM (\n\tSELECT paper_id\n\tFROM (\n\t\tSELECT name\n\t\tFROM authors a\n\t\tJOIN papers p ON p.paper_id = a.paper_id\n\t\tGROUP BY a.name\n\t\tORDER BY SUM(p.page_rank / (\n\t\t\tCASE \n\t\t\t\tWHEN num_authors < 4 THEN num_authors\n\t\t\t\tWHEN a.sequence = 1 OR a.sequence = num_authors THEN 3\n\t\t\t\tELSE num_authors * 3\n\t\t\tEND)) DESC\n\t\tLIMIT 100\n\t) ta \n\tJOIN authors a ON a.name = ta.name\n\tGROUP BY paper_id\n) a\nJOIN papers p ON p.paper_id = a.paper_id\nWHERE p.published_year > (strftime('%Y', 'now') - 3)\nAND {{filters}}\nORDER BY adamic_adar DESC, page_rank DESC"
        },
        {
          "title": "The Most Important Recent Papers",
          "sql": "SELECT paper_id, doi, authors, title, page_rank, num_cited_by, published_year\nFROM papers p\nWHERE p.published_year > (strftime('%Y', 'now') - 3)\nAND {{filters}}\nORDER BY page_rank DESC, adamic_adar DESC"
        }
      ]
    },
    {
      "id": "other-data",
      "title": "Other Data",
      "subtext": "This section highlights other interesting data related to the network.",
      "renderColumns": true,
      "content": [
        {
          "title": "Top Authors",
          "subtext": "This section tries to identify the top authors in the network.",
          "sql": "SELECT name as author_name, SUM(p.page_rank / (\n\tCASE \n\t\tWHEN num_authors < 4 THEN num_authors\n\t\tWHEN a.sequence = 1 OR a.sequence = num_authors THEN 3\n\t\tELSE num_authors * 3\n\tEND)) as total_page_rank, COUNT(*) as num_papers\nFROM papers p\nJOIN authors a ON p.paper_id = a.paper_id\nWHERE {{filters}}\nGROUP BY a.name, name\nORDER BY SUM(page_rank) DESC"
        },
        {
          "title": "Institutions",
          "subtext": "This section tries to identify the top institutions in the network.",
          "sql": "SELECT affiliation, SUM(page_rank) as total_page_rank, COUNT(*) as num_papers\nFROM papers p\nJOIN (\n\tSELECT paper_id, affiliation, affiliation_id\n\tFROM authors\n\tGROUP BY affiliation_id, affiliation, paper_id\n) a ON p.paper_id = a.paper_id\nWHERE {{filters}} AND a.affiliation <> ''\nGROUP BY  a.affiliation_id,a.affiliation\nORDER BY SUM(page_rank) DESC"
        },
        {
          "title": "Top Journals",
          "subtext": "This section tries to identify the most relevant journals for this research area",
          "sql": "SELECT journal, SUM(page_rank) as total_page_rank, COUNT(*) as num_papers\nFROM papers p\nWHERE {{filters}}\nAND journal <> ''\nGROUP BY journal\nORDER BY SUM(page_rank) DESC"
        }
      ]
    }
  ]
}